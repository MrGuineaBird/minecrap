<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MineCrap</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="preconnect" href="https://unpkg.com" crossorigin />
</head>
<body>
  <canvas id="game"></canvas>

  <div id="crosshair">+</div>

  <div id="hud">
    <div class="bars">
      <div class="bar-row"><span>HP</span><div class="bar"><div id="health-fill"></div></div><span id="health-text"></span></div>
      <div class="bar-row"><span>HU</span><div class="bar"><div id="hunger-fill"></div></div><span id="hunger-text"></span></div>
      <div class="bar-row"><span>XP</span><div class="bar"><div id="xp-fill"></div></div><span id="xp-text"></span></div>
      <div class="bar-row"><span>O2</span><div class="bar"><div id="oxygen-fill"></div></div><span id="oxygen-text"></span></div>
    </div>
    <div id="mode-pill">Survival</div>
    <div id="coords">x:0 y:0 z:0</div>
    <div id="clock">12:00</div>
    <canvas id="minimap" width="180" height="180"></canvas>
  </div>

  <div id="hotbar"></div>

  <div id="interaction-hint"></div>

  <div id="inventory-panel" class="panel hidden">
    <h2>Inventory</h2>
    <div class="inventory-craft-wrap">
      <div id="inventory-craft-grid" class="inventory-craft-grid"></div>
      <div class="inventory-craft-arrow">></div>
      <button id="inventory-craft-output" class="grid-slot inventory-craft-output" type="button" title="Craft output"></button>
    </div>
    <div id="inventory-grid" class="grid"></div>
    <div class="panel-actions">
      <button data-close="inventory-panel">Close</button>
    </div>
  </div>

  <div id="crafting-panel" class="panel hidden">
    <h2>Crafting Table</h2>
    <div id="crafting-recipes" class="recipes"></div>
    <div class="panel-actions">
      <button data-close="crafting-panel">Close</button>
    </div>
  </div>

  <div id="furnace-panel" class="panel hidden">
    <h2>Furnace</h2>
    <div id="furnace-ui">
      <label>Input <select id="furnace-input"></select></label>
      <label>Fuel <select id="furnace-fuel"></select></label>
      <button id="furnace-start">Smelt</button>
      <div id="furnace-status"></div>
    </div>
    <div class="panel-actions">
      <button data-close="furnace-panel">Close</button>
    </div>
  </div>

  <div id="chest-panel" class="panel hidden">
    <h2>Chest</h2>
    <div id="chest-grid" class="grid"></div>
    <div class="panel-actions">
      <button data-close="chest-panel">Close</button>
    </div>
  </div>

  <div id="enchant-panel" class="panel hidden">
    <h2>Enchanting</h2>
    <div id="enchant-options"></div>
    <div class="panel-actions">
      <button data-close="enchant-panel">Close</button>
    </div>
  </div>

  <div id="settings-panel" class="panel hidden">
    <h2>Settings</h2>
    <label>Render Distance <input id="render-distance" type="range" min="2" max="8" step="1" value="2" /></label>
    <label>Texture Pack
      <select id="texture-pack">
        <option value="classic">Classic</option>
        <option value="pastel">Pastel</option>
        <option value="high-contrast">High Contrast</option>
      </select>
    </label>
    <label>Player Skin Color <input id="skin-color" type="color" value="#d5a07a" /></label>
    <div class="panel-actions">
      <button id="toggle-third-person">Toggle Third Person (F5)</button>
      <button id="toggle-creative">Toggle Creative (M)</button>
      <button id="take-screenshot">Photo Mode Shot</button>
      <button data-close="settings-panel">Close</button>
    </div>
  </div>

  <div id="menu-panel" class="panel title-screen">
    <div class="title-content">
      <div class="title-hero">
        <div class="title-logo">
          <img class="title-logo-img" src="./textures/minecraplogo.png" alt="MineCrap" />
        </div>
        <p id="title-splash" class="title-splash">Now with extra questionable physics!</p>
      </div>
      <div class="title-main-actions">
        <button id="start-new" class="mc-btn">Singleplayer</button>
        <button id="load-world" class="mc-btn">Load World</button>
        <button id="open-options" class="mc-btn">Options...</button>
      </div>
    </div>
    <div class="title-footer">
      <span>MineCrap Prototype</span>
      <span>Not affiliated with Mojang.</span>
    </div>
    <div id="world-loading" class="world-loading hidden" aria-live="polite">
      <div id="world-loading-percent" class="world-loading-percent">0%</div>
      <div class="world-loading-preview-frame">
        <div id="world-loading-box" class="world-loading-box" aria-hidden="true"></div>
      </div>
      <div id="world-loading-label" class="world-loading-label">Preparing world...</div>
    </div>
    <select id="world-slot" class="hidden" aria-hidden="true">
      <option value="slot1">Slot 1</option>
      <option value="slot2">Slot 2</option>
      <option value="slot3">Slot 3</option>
    </select>

    <div id="new-world-popup" class="new-world-popup hidden">
      <div class="new-world-tabs">
        <button type="button" class="nw-tab" data-tab="game">Game</button>
        <button type="button" class="nw-tab active" data-tab="world">World</button>
        <button type="button" class="nw-tab" data-tab="more">More</button>
      </div>
      <div class="new-world-body">
        <section class="new-world-panel hidden" data-panel="game">
          <div class="new-world-row">
            <button type="button" id="newworld-gamemode" class="nw-btn">Game Mode: Survival</button>
            <button type="button" id="newworld-difficulty" class="nw-btn">Difficulty: Normal</button>
          </div>
          <p class="nw-note">Set your base gameplay style before creating a world.</p>
        </section>

        <section class="new-world-panel" data-panel="world">
          <div class="new-world-row">
            <button type="button" id="newworld-type" class="nw-btn">World Type: Default</button>
            <button type="button" id="newworld-customize" class="nw-btn">Customize</button>
          </div>
          <label class="nw-label" for="newworld-seed">Seed for the world generator</label>
          <input id="newworld-seed" class="nw-input" type="text" placeholder="Leave blank for a random seed" />
          <div class="new-world-toggles">
            <div class="nw-toggle-row">
              <span>Generate Structures</span>
              <button id="newworld-structures" type="button" class="nw-toggle is-on" data-on="ON" data-off="OFF">ON</button>
            </div>
            <div class="nw-toggle-row">
              <span>Bonus Chest</span>
              <button id="newworld-bonus" type="button" class="nw-toggle is-off" data-on="ON" data-off="OFF">OFF</button>
            </div>
          </div>
          <div class="new-world-slot">
            <label class="nw-label" for="newworld-slot">World Slot</label>
            <select id="newworld-slot" class="nw-input">
              <option value="slot1">Slot 1</option>
              <option value="slot2">Slot 2</option>
              <option value="slot3">Slot 3</option>
            </select>
          </div>
        </section>

        <section class="new-world-panel hidden" data-panel="more">
          <div class="new-world-toggles">
            <div class="nw-toggle-row">
              <span>Allow Cheats</span>
              <button id="newworld-cheats" type="button" class="nw-toggle is-off" data-on="ON" data-off="OFF">OFF</button>
            </div>
          </div>
          <div class="new-world-row">
            <button type="button" id="newworld-time" class="nw-btn">Starting Time: Day</button>
            <button type="button" id="newworld-reset" class="nw-btn">Reset Settings</button>
          </div>
          <p class="nw-note">Advanced options are lightweight for now and may expand later.</p>
        </section>
      </div>
      <div class="new-world-actions">
        <button id="create-world-confirm" type="button" class="nw-btn">Create New World</button>
        <button id="create-world-cancel" type="button" class="nw-btn">Cancel</button>
      </div>
    </div>
  </div>

  <div id="touch-controls" class="hidden">
    <div id="stick-left" class="touch-stick"></div>
    <div id="touch-buttons">
      <button data-touch="jump">Jump</button>
      <button data-touch="place">Place</button>
      <button data-touch="break">Break</button>
      <button data-touch="inventory">Inv</button>
    </div>
  </div>

  <div id="pause-panel" class="panel hidden pause-menu">
    <h2>Game Menu</h2>
    <div class="pause-actions">
      <button id="pause-resume" class="pause-btn">Back to Game</button>
      <div class="pause-row">
        <button id="pause-advancements" class="pause-btn">Advancements</button>
        <button id="pause-stats" class="pause-btn">Statistics</button>
      </div>
      <div class="pause-row">
        <button id="pause-feedback" class="pause-btn">Give Feedback</button>
        <button id="pause-bugs" class="pause-btn">Report Bugs</button>
      </div>
      <div class="pause-row">
        <button id="pause-options" class="pause-btn">Options...</button>
        <button id="pause-lan" class="pause-btn">Open to LAN</button>
      </div>
      <button id="pause-quit" class="pause-btn">Save and Quit to Title</button>
    </div>
  </div>

  <div id="boot-error" class="panel hidden">
    <h2>Boot Error</h2>
    <p id="boot-error-text"></p>
  </div>

  <script>
    (function () {
      const bootError = document.getElementById("boot-error");
      const bootErrorText = document.getElementById("boot-error-text");
      window.showBootError = function (msg) {
        bootErrorText.textContent = msg;
        bootError.classList.remove("hidden");
      };
      window.addEventListener("error", function (e) {
        if (!e || !e.message) return;
        window.showBootError("Runtime error: " + e.message);
      });
    })();
  </script>
  <script src="./assets/three.min.js?v=2026-02-28-1"></script>
  <script>
    if (!window.THREE) {
      window.showBootError("Could not load ./assets/three.min.js.");
    } else {
      const BUILD_VERSION = "2026-02-28-15";
      window.__WEBCRAFT_BUILD__ = BUILD_VERSION;
      console.info("[WebCraft] Build", BUILD_VERSION);
      const s = document.createElement("script");
      s.src = `./src/main.js?v=${BUILD_VERSION}`;
      s.onerror = function () {
        window.showBootError("Loaded three.js but failed to load ./src/main.js.");
      };
      document.body.appendChild(s);
    }
  </script>
</body>
</html>








